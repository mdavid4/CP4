{"remainingRequest":"/Users/davidl/Desktop/School/CS260/CP4/front-end/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/davidl/Desktop/School/CS260/CP4/front-end/src/views/Admin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/davidl/Desktop/School/CS260/CP4/front-end/src/views/Admin.vue","mtime":1607043055840},{"path":"/Users/davidl/Desktop/School/CS260/CP4/front-end/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/davidl/Desktop/School/CS260/CP4/front-end/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/davidl/Desktop/School/CS260/CP4/front-end/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/davidl/Desktop/School/CS260/CP4/front-end/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdBZG1pbicsCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHRpdGxlOiAiIiwKICAgICAgICAgICAgY29zdDogbnVsbCwKICAgICAgICAgICAgaW5ncmVkaWVudHM6IFtdLAogICAgICAgICAgICBuYW1lLAogICAgICAgICAgICBwaXp6YXM6IFtdLAogICAgICAgICAgICBmaW5kVGl0bGU6ICIiLAogICAgICAgICAgICBmaW5kSXRlbTogbnVsbCwKICAgICAgICAgICAgY29udGFpbnM6IFtdLAogICAgICAgICAgICBuZXdVcFZvdGVzOiAwLAogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICAgIHRoaXMuZ2V0SW5ncmVkaWVudHMoKTsKICAgICAgICB0aGlzLmdldFBpenphcygpOwogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgc3VnZ2VzdGlvbnMoKSB7CiAgICAgICAgICAgIGxldCBpdGVtcyA9IHRoaXMucGl6emFzLmZpbHRlcihpdGVtID0+IGl0ZW0ubmFtZS50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgodGhpcy5maW5kVGl0bGUudG9Mb3dlckNhc2UoKSkpOwogICAgICAgICAgICByZXR1cm4gaXRlbXMuc29ydCgoYSwgYikgPT4gYS50aXRsZSA+IGIudGl0bGUpOwogICAgICAgIH0sCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGNoZWNrZWRJbmdyZWRpZW50SURzKCkgewogICAgICAgICAgICBsZXQgaWRzID0gdGhpcy5pbmdyZWRpZW50cy5tYXAoeCA9PiB4Ll9pZCk7CiAgICAgICAgICAgIGxldCBjaGVja2VkSURzID0gW107CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb250YWluc1tpXSkgewogICAgICAgICAgICAgICAgICAgIGNoZWNrZWRJRHMucHVzaChpZHNbaV0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGNoZWNrZWRJRHM7CiAgICAgICAgfSwKICAgICAgICBzZWxlY3RJdGVtKGl0ZW0pIHsKICAgICAgICAgICAgdGhpcy5maW5kVGl0bGUgPSAiIjsKICAgICAgICAgICAgdGhpcy5maW5kSXRlbSA9IGl0ZW07CiAgICAgICAgICAgIHRoaXMubmV3VXBWb3RlcyA9IGl0ZW0udXBWb3RlczsKICAgICAgICAgICAgbGV0IGNvbnRhaW5zID0gW107CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmdyZWRpZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgaWYgKGl0ZW0uaW5ncmVkaWVudHMuc29tZShpbmdyID0+IGluZ3IuX2lkID09IHRoaXMuaW5ncmVkaWVudHNbaV0uX2lkKSkgewogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5zLnB1c2godHJ1ZSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5zLnB1c2goZmFsc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuY29udGFpbnMgPSBjb250YWluczsKICAgICAgICB9LAogICAgICAgIGFzeW5jIGFkZEluZ3JlZGllbnQoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wb3N0KCcvYXBpL2luZ3JlZGllbnRzJywgewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnRpdGxlLAogICAgICAgICAgICAgICAgICAgIHBhdGg6IHRoaXMuY29zdAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0aGlzLmdldEluZ3JlZGllbnRzKCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFzeW5jIGdldEluZ3JlZGllbnRzKCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KCIvYXBpL2luZ3JlZGllbnRzIik7CiAgICAgICAgICAgICAgICB0aGlzLmluZ3JlZGllbnRzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhc3luYyBnZXRQaXp6YXMoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoIi9hcGkvcGl6emFzIik7CiAgICAgICAgICAgICAgICB0aGlzLnBpenphcyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgZGVsZXRlSW5ncmVkaWVudChpbmdyZWRpZW50KSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5kZWxldGUoIi9hcGkvaW5ncmVkaWVudHMvIiArIGluZ3JlZGllbnQuX2lkKTsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW5ncmVkaWVudHMoKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhc3luYyBkZWxldGVQaXp6YShwaXp6YSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MuZGVsZXRlKCIvYXBpL3Bpenphcy8iICsgcGl6emEuX2lkKTsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0UGl6emFzKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgZWRpdFBpenphKHBpenphKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wdXQoIi9hcGkvcGl6emFzLyIgKyBwaXp6YS5faWQsIHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLmZpbmRJdGVtLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgaW5ncmVkaWVudHM6IHRoaXMuY2hlY2tlZEluZ3JlZGllbnRJRHMoKSwKICAgICAgICAgICAgICAgICAgICB1cFZvdGVzOiBwYXJzZUludCh0aGlzLm5ld1VwVm90ZXMpLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0aGlzLmZpbmRJdGVtID0gbnVsbDsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0UGl6emFzKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICB9LAp9Cg=="},{"version":3,"sources":["Admin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Admin.vue","sourceRoot":"src/views","sourcesContent":["<template>\n<div class=\"admin\">\n    <h1>Master Pizzaiolo's Page</h1>\n    <h2>Ingredients: </h2>\n    <div class=\"add\">\n        <div class=\"form\">\n            <input v-model=\"title\" placeholder=\"Ingredient\">\n            $<input v-model=\"cost\" type=\"number\" min=\"0.00\" max=\"10000.00\" step=\"0.01\" placeholder=\"0.00\">\n            <button @click=\"addIngredient\">Add</button>\n        </div>\n    </div>\n    <div class=\"ingredient\" v-for=\"ingredient in ingredients\" :key=\"ingredient.id\">\n        <p>{{ingredient.title}} <button @click=\"deleteIngredient(ingredient)\">X</button></p>\n    </div>\n    <h2>Pizzas: </h2>\n    <div class=\"form\">\n        <input v-model=\"findTitle\" placeholder=\"Search\">\n        <div class=\"suggestions\" v-if=\"suggestions.length > 0\">\n            <div class=\"suggestion\" v-for=\"s in suggestions\" :key=\"s.id\" @click=\"selectItem(s)\">{{s.name}}\n            </div>\n        </div>\n    </div>\n    <div class=results>\n        <div class=\"upload\" v-if=\"findItem\">\n            Name: <input v-model=\"findItem.name\">\n        </div>\n        <div class=\"upvotes\" v-if=\"findItem\">\n            Upvotes: <input type=\"number\" v-model=\"newUpVotes\">\n        </div>\n        <div class=\"ingredients\" v-if=\"findItem\">\n            <p>Ingredients:</p>\n            <p class=\"li\" v-for=\"(ingredient, index) in ingredients\" :key=\"index\">\n                <input type=\"checkbox\" :id=\"ingredient\" :name=\"ingredient\" v-model=\"contains[index]\">\n                {{ingredient.title}}\n            </p>\n        </div>\n        <div class=\"actions\" v-if=\"findItem\">\n            <button @click=\"deletePizza(findItem)\">Delete</button>\n            <button @click=\"editPizza(findItem)\">Edit</button>\n        </div>\n    </div>\n\n</div>\n</template>\n\n<script>\nimport axios from 'axios';\nexport default {\n    name: 'Admin',\n    data() {\n        return {\n            title: \"\",\n            cost: null,\n            ingredients: [],\n            name,\n            pizzas: [],\n            findTitle: \"\",\n            findItem: null,\n            contains: [],\n            newUpVotes: 0,\n        }\n    },\n    created() {\n        this.getIngredients();\n        this.getPizzas();\n    },\n    computed: {\n        suggestions() {\n            let items = this.pizzas.filter(item => item.name.toLowerCase().startsWith(this.findTitle.toLowerCase()));\n            return items.sort((a, b) => a.title > b.title);\n        },\n    },\n    methods: {\n        checkedIngredientIDs() {\n            let ids = this.ingredients.map(x => x._id);\n            let checkedIDs = [];\n            for (let i = 0; i < ids.length; i++) {\n                if (this.contains[i]) {\n                    checkedIDs.push(ids[i])\n                }\n            }\n            return checkedIDs;\n        },\n        selectItem(item) {\n            this.findTitle = \"\";\n            this.findItem = item;\n            this.newUpVotes = item.upVotes;\n            let contains = [];\n            for (let i = 0; i < this.ingredients.length; i++) {\n                if (item.ingredients.some(ingr => ingr._id == this.ingredients[i]._id)) {\n                    contains.push(true);\n                } else {\n                    contains.push(false);\n                }\n            }\n            this.contains = contains;\n        },\n        async addIngredient() {\n            try {\n                await axios.post('/api/ingredients', {\n                    title: this.title,\n                    path: this.cost\n                });\n                this.getIngredients();\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        async getIngredients() {\n            try {\n                let response = await axios.get(\"/api/ingredients\");\n                this.ingredients = response.data;\n                return true;\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        async getPizzas() {\n            try {\n                let response = await axios.get(\"/api/pizzas\");\n                this.pizzas = response.data;\n                return true;\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        async deleteIngredient(ingredient) {\n            try {\n                await axios.delete(\"/api/ingredients/\" + ingredient._id);\n                this.getIngredients();\n                return true;\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        async deletePizza(pizza) {\n            try {\n                await axios.delete(\"/api/pizzas/\" + pizza._id);\n                this.getPizzas();\n                return true;\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        async editPizza(pizza) {\n            try {\n                await axios.put(\"/api/pizzas/\" + pizza._id, {\n                    name: this.findItem.name,\n                    ingredients: this.checkedIngredientIDs(),\n                    upVotes: parseInt(this.newUpVotes),\n                });\n                this.findItem = null;\n                this.getPizzas();\n                return true;\n            } catch (error) {\n                console.log(error);\n            }\n        },\n    },\n}\n</script>\n\n<style scoped>\n.heading {\n    display: flex;\n    margin-bottom: 20px;\n    margin-top: 20px;\n}\n\n.heading h2 {\n    margin-top: 8px;\n    margin-left: 10px;\n}\n\n.add,\n.edit {\n    display: flex;\n}\n\n/* Suggestions */\n.suggestions {\n    width: 200px;\n    border: 1px solid #ccc;\n    color: black;\n}\n\n.suggestion {\n    min-height: 20px;\n}\n\n.suggestion:hover {\n    background-color: #5BDEFF;\n    color: #fff;\n}\n\n.results {\n    margin-top: 3em;\n    border: 1px solid #905000;\n    border-radius: 2em;\n    padding: 1em;\n    width: 24em;\n}\n\n.li {\n    margin: 1px 10px;\n}\n\nh2 {\n    font-size: 1.2em;\n    font-weight: bold;\n    background-color: #e3e3e3;\n    border-radius: 1em;\n    padding: 0.3em;\n    width: 12em;\n}\n\n/* Form */\ninput,\ntextarea,\nselect,\nbutton {\n    font-family: 'Montserrat', sans-serif;\n    font-size: 1em;\n}\n\n.form {\n    margin-right: 50px;\n}\n\n/* Uploaded images */\n</style>\n"]}]}