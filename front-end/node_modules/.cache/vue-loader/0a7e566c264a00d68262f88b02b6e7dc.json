{"remainingRequest":"/Users/davidl/Desktop/School/CS260/CP4/front-end/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/davidl/Desktop/School/CS260/CP4/front-end/src/views/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/davidl/Desktop/School/CS260/CP4/front-end/src/views/Home.vue","mtime":1607043821868},{"path":"/Users/davidl/Desktop/School/CS260/CP4/front-end/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/davidl/Desktop/School/CS260/CP4/front-end/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/davidl/Desktop/School/CS260/CP4/front-end/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/davidl/Desktop/School/CS260/CP4/front-end/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdIb21lJywKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaW5ncmVkaWVudHM6IFtdLAogICAgICAgICAgICBjaGVja2VkOiBbXSwKICAgICAgICAgICAgZm9yYmlkZGVuOiBbXSwKICAgICAgICAgICAgcGl6emFzOiBbXSwKICAgICAgICAgICAgbmFtZSwKICAgICAgICB9CiAgICB9LAogICAgY3JlYXRlZCgpIHsKICAgICAgICB0aGlzLmdldEluZ3JlZGllbnRzKCk7CiAgICAgICAgdGhpcy5nZXRQaXp6YXMoKTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgaW5ncmVkaWVudEJ5SUQoaWQpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmluZ3JlZGllbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbmdyZWRpZW50c1tpXS5faWQgPT0gaWQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbmdyZWRpZW50c1tpXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgZm9ybWF0UHJpY2UodmFsdWUpIHsKICAgICAgICAgICAgbGV0IHZhbCA9ICh2YWx1ZSAvIDEpLnRvRml4ZWQoMikucmVwbGFjZSgnLicsICcuJykKICAgICAgICAgICAgcmV0dXJuIHZhbC50b1N0cmluZygpLnJlcGxhY2UoL1xCKD89KFxkezN9KSsoPyFcZCkpL2csICIuIikKICAgICAgICB9LAogICAgICAgIHByaWNlT2YocGl6emEpIHsKICAgICAgICAgICAgbGV0IHByaWNlID0gMTA7CiAgICAgICAgICAgIGZvciAobGV0IGluZ3JlZGllbnQgb2YgcGl6emEuaW5ncmVkaWVudHMpIHsKICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coaWQpOwogICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmluZ3JlZGllbnRCeUlEKGlkKSk7CiAgICAgICAgICAgICAgICBwcmljZSArPSBpbmdyZWRpZW50LmNvc3Q7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0UHJpY2UocHJpY2UpOwogICAgICAgIH0sCiAgICAgICAgZm9yYmlkZGVuVXBkYXRlKGluZGV4KSB7CiAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWRbaW5kZXhdKSB7CiAgICAgICAgICAgICAgICB0aGlzLmZvcmJpZGRlbltpbmRleF0gPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgY2hlY2tlZFVwZGF0ZShpbmRleCkgewogICAgICAgICAgICBpZiAodGhpcy5mb3JiaWRkZW5baW5kZXhdKSB7CiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRbaW5kZXhdID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGNoZWNrZWRJbmdyZWRpZW50SURzKCkgewogICAgICAgICAgICBsZXQgaWRzID0gdGhpcy5pbmdyZWRpZW50cy5tYXAoeCA9PiB4Ll9pZCk7CiAgICAgICAgICAgIGxldCBjaGVja2VkID0gdGhpcy5jaGVja2VkLm1hcCh4ID0+IHgpOwogICAgICAgICAgICBsZXQgY2hlY2tlZElEcyA9IFtdOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlkcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgaWYgKGNoZWNrZWRbaV0pIHsKICAgICAgICAgICAgICAgICAgICBjaGVja2VkSURzLnB1c2goaWRzW2ldKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBjaGVja2VkSURzOwogICAgICAgIH0sCiAgICAgICAgYXN5bmMgZ2V0SW5ncmVkaWVudHMoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoIi9hcGkvaW5ncmVkaWVudHMiKTsKICAgICAgICAgICAgICAgIHRoaXMuaW5ncmVkaWVudHMgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgbGV0IGkgPSAwOwogICAgICAgICAgICAgICAgd2hpbGUgKGkgPCB0aGlzLmluZ3JlZGllbnRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZC5wdXNoKGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcmJpZGRlbi5wdXNoKGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICBpKys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgZ2V0UGl6emFzKCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KCIvYXBpL3BpenphcyIpOwogICAgICAgICAgICAgICAgdGhpcy5waXp6YXMgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFzeW5jIG1ha2VQaXp6YSgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zLnBvc3QoJy9hcGkvcGl6emFzJywgewogICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSwKICAgICAgICAgICAgICAgICAgICBpbmdyZWRpZW50czogdGhpcy5jaGVja2VkSW5ncmVkaWVudElEcygpLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0aGlzLmdldFBpenphcygpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFzeW5jIHVwVm90ZShwaXp6YSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MucHV0KCIvYXBpL3Vwdm90ZS8iICsgcGl6emEuX2lkKTsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0UGl6emFzKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICB9Cn0K"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n<div class=\"home\">\n    <section class=\"ingredients\">\n        <tr>\n            <th>Ingredient</th>\n            <th>Price</th>\n            <th>Require this on pizzas</th>\n            <th>Exclude pizzas containing this</th>\n        </tr>\n        <tr class=\"ingredient\" v-for=\"(ingredient, index) in ingredients\" :key=\"index\">\n            <td>{{ingredient.title}}</td>\n            <td>${{formatPrice(ingredient.cost)}}</td>\n            <td class=\"check\"><input type=\"checkbox\" class=\"check\" :id=\"ingredient\" :name=\"ingredient\" v-model=\"checked[index]\" @change=\"forbiddenUpdate(index)\"></td>\n            <td class=\"check\"><input type=\"checkbox\" class=\"check\" :id=\"ingredient\" :name=\"ingredient\" v-model=\"forbidden[index]\" @change=\"checkedUpdate(index)\"></td>\n        </tr>\n    </section>\n    <h3>Create your own pizza based on selected ingredients above:</h3>\n    <section class=\"makePizza\">\n        <div class=\"form\">\n            <input v-model=\"name\" placeholder=\"pizza name\">\n            <button @click=\"makePizza\">Create</button>\n        </div>\n    </section>\n    <h3> Pizzas: </h3>\n    <section class=\"pizzas\">\n        <div class=\"pizza\" v-for=\"pizza in pizzas\" :key=\"pizza.id\">\n            <h2>{{pizza.name}}</h2>\n            <p class=\"price\">${{priceOf(pizza)}}</p>\n            <p>ingredients:</p>\n            <ul>\n                <li class=\"ingredient\" v-for=\"(ingredient, index) in pizza.ingredients\" :key=\"index\"> {{ingredient.title}} </li>\n            </ul>\n            <button @click=\"upVote(pizza)\">upvote</button> upvotes: {{pizza.upVotes}}\n        </div>\n    </section>\n</div>\n</template>\n\n<script>\nimport axios from 'axios';\nexport default {\n    name: 'Home',\n    data() {\n        return {\n            ingredients: [],\n            checked: [],\n            forbidden: [],\n            pizzas: [],\n            name,\n        }\n    },\n    created() {\n        this.getIngredients();\n        this.getPizzas();\n    },\n    methods: {\n        ingredientByID(id) {\n            for (let i = 0; i < this.ingredients.length; i++) {\n                if (this.ingredients[i]._id == id) {\n                    return this.ingredients[i];\n                }\n            }\n        },\n        formatPrice(value) {\n            let val = (value / 1).toFixed(2).replace('.', '.')\n            return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\")\n        },\n        priceOf(pizza) {\n            let price = 10;\n            for (let ingredient of pizza.ingredients) {\n                //console.log(id);\n                //console.log(this.ingredientByID(id));\n                price += ingredient.cost;\n            }\n            return this.formatPrice(price);\n        },\n        forbiddenUpdate(index) {\n            if (this.checked[index]) {\n                this.forbidden[index] = false;\n            }\n        },\n        checkedUpdate(index) {\n            if (this.forbidden[index]) {\n                this.checked[index] = false;\n            }\n        },\n        checkedIngredientIDs() {\n            let ids = this.ingredients.map(x => x._id);\n            let checked = this.checked.map(x => x);\n            let checkedIDs = [];\n            for (let i = 0; i < ids.length; i++) {\n                if (checked[i]) {\n                    checkedIDs.push(ids[i])\n                }\n            }\n            return checkedIDs;\n        },\n        async getIngredients() {\n            try {\n                let response = await axios.get(\"/api/ingredients\");\n                this.ingredients = response.data;\n                let i = 0;\n                while (i < this.ingredients.length) {\n                    this.checked.push(false);\n                    this.forbidden.push(false);\n                    i++;\n                }\n                return true;\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        async getPizzas() {\n            try {\n                let response = await axios.get(\"/api/pizzas\");\n                this.pizzas = response.data;\n                return true;\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        async makePizza() {\n            try {\n                await axios.post('/api/pizzas', {\n                    name: this.name,\n                    ingredients: this.checkedIngredientIDs(),\n                });\n                this.getPizzas();\n                return true;\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        async upVote(pizza) {\n            try {\n                await axios.put(\"/api/upvote/\" + pizza._id);\n                this.getPizzas();\n                return true;\n            } catch (error) {\n                console.log(error);\n            }\n        },\n    }\n}\n</script>\n\n<style scoped>\n.image h2 {\n    font-style: italic;\n}\n\n/* Masonry */\n*,\n*:before,\n*:after {\n    box-sizing: inherit;\n}\n\n.pizza {\n    border: 1px solid black;\n    padding: 0 2em;\n    margin: 1em;\n}\n\n/* Masonry on large screens */\n@media only screen and (min-width: 1024px) {\n    .image-gallery {\n        column-count: 4;\n    }\n}\n\nh2 {\n    font-size: 1.2em;\n    font-weight: bold;\n    background-color: #e3e3e3;\n    border-radius: 1em;\n    padding: 0.3em;\n    width: 12em;\n}\n\n.check {\n    justify-content: center;\n    text-align: center;\n}\n\n.price {\n    margin-top: -10px;\n    margin-bottom: -10px;\n    margin-left: 30px;\n    font-size: 0.7em;\n}\n\nth {\n    font-weight: bold;\n    font-style: oblique;\n    margin: 1em;\n    padding: 1em;\n}\n\n/* Masonry on medium-sized screens */\n@media only screen and (max-width: 1023px) and (min-width: 768px) {\n    .image-gallery {\n        column-count: 3;\n    }\n}\n\n/* Masonry on small screens */\n@media only screen and (max-width: 767px) and (min-width: 540px) {\n    .image-gallery {\n        column-count: 2;\n    }\n}\n</style>\n"]}]}