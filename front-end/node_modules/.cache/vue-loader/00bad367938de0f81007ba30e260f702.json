{"remainingRequest":"/Users/davidl/Desktop/School/CS260/CP4/front-end/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/davidl/Desktop/School/CS260/CP4/front-end/src/views/Admin.vue?vue&type=style&index=0&id=54c38a05&scoped=true&lang=css&","dependencies":[{"path":"/Users/davidl/Desktop/School/CS260/CP4/front-end/src/views/Admin.vue","mtime":1607043055840},{"path":"/Users/davidl/Desktop/School/CS260/CP4/front-end/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/davidl/Desktop/School/CS260/CP4/front-end/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/davidl/Desktop/School/CS260/CP4/front-end/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/davidl/Desktop/School/CS260/CP4/front-end/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/davidl/Desktop/School/CS260/CP4/front-end/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5oZWFkaW5nIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBtYXJnaW4tYm90dG9tOiAyMHB4OwogICAgbWFyZ2luLXRvcDogMjBweDsKfQoKLmhlYWRpbmcgaDIgewogICAgbWFyZ2luLXRvcDogOHB4OwogICAgbWFyZ2luLWxlZnQ6IDEwcHg7Cn0KCi5hZGQsCi5lZGl0IHsKICAgIGRpc3BsYXk6IGZsZXg7Cn0KCi8qIFN1Z2dlc3Rpb25zICovCi5zdWdnZXN0aW9ucyB7CiAgICB3aWR0aDogMjAwcHg7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjOwogICAgY29sb3I6IGJsYWNrOwp9Cgouc3VnZ2VzdGlvbiB7CiAgICBtaW4taGVpZ2h0OiAyMHB4Owp9Cgouc3VnZ2VzdGlvbjpob3ZlciB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNUJERUZGOwogICAgY29sb3I6ICNmZmY7Cn0KCi5yZXN1bHRzIHsKICAgIG1hcmdpbi10b3A6IDNlbTsKICAgIGJvcmRlcjogMXB4IHNvbGlkICM5MDUwMDA7CiAgICBib3JkZXItcmFkaXVzOiAyZW07CiAgICBwYWRkaW5nOiAxZW07CiAgICB3aWR0aDogMjRlbTsKfQoKLmxpIHsKICAgIG1hcmdpbjogMXB4IDEwcHg7Cn0KCmgyIHsKICAgIGZvbnQtc2l6ZTogMS4yZW07CiAgICBmb250LXdlaWdodDogYm9sZDsKICAgIGJhY2tncm91bmQtY29sb3I6ICNlM2UzZTM7CiAgICBib3JkZXItcmFkaXVzOiAxZW07CiAgICBwYWRkaW5nOiAwLjNlbTsKICAgIHdpZHRoOiAxMmVtOwp9CgovKiBGb3JtICovCmlucHV0LAp0ZXh0YXJlYSwKc2VsZWN0LApidXR0b24gewogICAgZm9udC1mYW1pbHk6ICdNb250c2VycmF0Jywgc2Fucy1zZXJpZjsKICAgIGZvbnQtc2l6ZTogMWVtOwp9CgouZm9ybSB7CiAgICBtYXJnaW4tcmlnaHQ6IDUwcHg7Cn0KCi8qIFVwbG9hZGVkIGltYWdlcyAqLwo="},{"version":3,"sources":["Admin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA","file":"Admin.vue","sourceRoot":"src/views","sourcesContent":["<template>\n<div class=\"admin\">\n    <h1>Master Pizzaiolo's Page</h1>\n    <h2>Ingredients: </h2>\n    <div class=\"add\">\n        <div class=\"form\">\n            <input v-model=\"title\" placeholder=\"Ingredient\">\n            $<input v-model=\"cost\" type=\"number\" min=\"0.00\" max=\"10000.00\" step=\"0.01\" placeholder=\"0.00\">\n            <button @click=\"addIngredient\">Add</button>\n        </div>\n    </div>\n    <div class=\"ingredient\" v-for=\"ingredient in ingredients\" :key=\"ingredient.id\">\n        <p>{{ingredient.title}} <button @click=\"deleteIngredient(ingredient)\">X</button></p>\n    </div>\n    <h2>Pizzas: </h2>\n    <div class=\"form\">\n        <input v-model=\"findTitle\" placeholder=\"Search\">\n        <div class=\"suggestions\" v-if=\"suggestions.length > 0\">\n            <div class=\"suggestion\" v-for=\"s in suggestions\" :key=\"s.id\" @click=\"selectItem(s)\">{{s.name}}\n            </div>\n        </div>\n    </div>\n    <div class=results>\n        <div class=\"upload\" v-if=\"findItem\">\n            Name: <input v-model=\"findItem.name\">\n        </div>\n        <div class=\"upvotes\" v-if=\"findItem\">\n            Upvotes: <input type=\"number\" v-model=\"newUpVotes\">\n        </div>\n        <div class=\"ingredients\" v-if=\"findItem\">\n            <p>Ingredients:</p>\n            <p class=\"li\" v-for=\"(ingredient, index) in ingredients\" :key=\"index\">\n                <input type=\"checkbox\" :id=\"ingredient\" :name=\"ingredient\" v-model=\"contains[index]\">\n                {{ingredient.title}}\n            </p>\n        </div>\n        <div class=\"actions\" v-if=\"findItem\">\n            <button @click=\"deletePizza(findItem)\">Delete</button>\n            <button @click=\"editPizza(findItem)\">Edit</button>\n        </div>\n    </div>\n\n</div>\n</template>\n\n<script>\nimport axios from 'axios';\nexport default {\n    name: 'Admin',\n    data() {\n        return {\n            title: \"\",\n            cost: null,\n            ingredients: [],\n            name,\n            pizzas: [],\n            findTitle: \"\",\n            findItem: null,\n            contains: [],\n            newUpVotes: 0,\n        }\n    },\n    created() {\n        this.getIngredients();\n        this.getPizzas();\n    },\n    computed: {\n        suggestions() {\n            let items = this.pizzas.filter(item => item.name.toLowerCase().startsWith(this.findTitle.toLowerCase()));\n            return items.sort((a, b) => a.title > b.title);\n        },\n    },\n    methods: {\n        checkedIngredientIDs() {\n            let ids = this.ingredients.map(x => x._id);\n            let checkedIDs = [];\n            for (let i = 0; i < ids.length; i++) {\n                if (this.contains[i]) {\n                    checkedIDs.push(ids[i])\n                }\n            }\n            return checkedIDs;\n        },\n        selectItem(item) {\n            this.findTitle = \"\";\n            this.findItem = item;\n            this.newUpVotes = item.upVotes;\n            let contains = [];\n            for (let i = 0; i < this.ingredients.length; i++) {\n                if (item.ingredients.some(ingr => ingr._id == this.ingredients[i]._id)) {\n                    contains.push(true);\n                } else {\n                    contains.push(false);\n                }\n            }\n            this.contains = contains;\n        },\n        async addIngredient() {\n            try {\n                await axios.post('/api/ingredients', {\n                    title: this.title,\n                    path: this.cost\n                });\n                this.getIngredients();\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        async getIngredients() {\n            try {\n                let response = await axios.get(\"/api/ingredients\");\n                this.ingredients = response.data;\n                return true;\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        async getPizzas() {\n            try {\n                let response = await axios.get(\"/api/pizzas\");\n                this.pizzas = response.data;\n                return true;\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        async deleteIngredient(ingredient) {\n            try {\n                await axios.delete(\"/api/ingredients/\" + ingredient._id);\n                this.getIngredients();\n                return true;\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        async deletePizza(pizza) {\n            try {\n                await axios.delete(\"/api/pizzas/\" + pizza._id);\n                this.getPizzas();\n                return true;\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        async editPizza(pizza) {\n            try {\n                await axios.put(\"/api/pizzas/\" + pizza._id, {\n                    name: this.findItem.name,\n                    ingredients: this.checkedIngredientIDs(),\n                    upVotes: parseInt(this.newUpVotes),\n                });\n                this.findItem = null;\n                this.getPizzas();\n                return true;\n            } catch (error) {\n                console.log(error);\n            }\n        },\n    },\n}\n</script>\n\n<style scoped>\n.heading {\n    display: flex;\n    margin-bottom: 20px;\n    margin-top: 20px;\n}\n\n.heading h2 {\n    margin-top: 8px;\n    margin-left: 10px;\n}\n\n.add,\n.edit {\n    display: flex;\n}\n\n/* Suggestions */\n.suggestions {\n    width: 200px;\n    border: 1px solid #ccc;\n    color: black;\n}\n\n.suggestion {\n    min-height: 20px;\n}\n\n.suggestion:hover {\n    background-color: #5BDEFF;\n    color: #fff;\n}\n\n.results {\n    margin-top: 3em;\n    border: 1px solid #905000;\n    border-radius: 2em;\n    padding: 1em;\n    width: 24em;\n}\n\n.li {\n    margin: 1px 10px;\n}\n\nh2 {\n    font-size: 1.2em;\n    font-weight: bold;\n    background-color: #e3e3e3;\n    border-radius: 1em;\n    padding: 0.3em;\n    width: 12em;\n}\n\n/* Form */\ninput,\ntextarea,\nselect,\nbutton {\n    font-family: 'Montserrat', sans-serif;\n    font-size: 1em;\n}\n\n.form {\n    margin-right: 50px;\n}\n\n/* Uploaded images */\n</style>\n"]}]}